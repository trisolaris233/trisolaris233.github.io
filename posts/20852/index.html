<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    通过一个小项目学习Makefile
  
</title>

<meta name="description" content="最近在linux上写了一个小项目，接触了make等工具，这次就通过一些辅助例子和我这个小项目来介绍一下makefile的基本写法。 makefile何为物 在软件开发中，make是一个工具程序（Utility software），经由读取叫做“makefile”的文件，自动化建构软件。  这是来自维基百科的介绍， 其实说直白一点，就是一个编译工具。因此， 我们下载下来一个项目后， 一般会附带一个m">
<meta name="keywords" content="makefile">
<meta property="og:type" content="article">
<meta property="og:title" content="通过一个小项目学习Makefile">
<meta property="og:url" content="https://trisolaris233.github.io/posts/20852/index.html">
<meta property="og:site_name" content="阳光加冰の博客">
<meta property="og:description" content="最近在linux上写了一个小项目，接触了make等工具，这次就通过一些辅助例子和我这个小项目来介绍一下makefile的基本写法。 makefile何为物 在软件开发中，make是一个工具程序（Utility software），经由读取叫做“makefile”的文件，自动化建构软件。  这是来自维基百科的介绍， 其实说直白一点，就是一个编译工具。因此， 我们下载下来一个项目后， 一般会附带一个m">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-03-17T15:52:52.810Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="通过一个小项目学习Makefile">
<meta name="twitter:description" content="最近在linux上写了一个小项目，接触了make等工具，这次就通过一些辅助例子和我这个小项目来介绍一下makefile的基本写法。 makefile何为物 在软件开发中，make是一个工具程序（Utility software），经由读取叫做“makefile”的文件，自动化建构软件。  这是来自维基百科的介绍， 其实说直白一点，就是一个编译工具。因此， 我们下载下来一个项目后， 一般会附带一个m">


  <link rel="alternative" href="/atom.xml" title="阳光加冰の博客" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body>
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <img style="position: absolute; top:10px; width: 40px; height: 40px; display:inline-block;" src="/favicon.png">
  <a class="title" href="/">阳光加冰の博客</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">阳光加冰の博客</a></h1>
    
    <div class="info">
      <div class="content">
        
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="https://cn.gravatar.com/avatar/a2403d984f652c52137c0c3402d83185?s=200"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Home">Home</a>
              </li>
            
          
          
          
        
      
        <ul class="nav">
          
            
              <li class="archive-list-container">
                <a href="javascript:;">Archive</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">2</span></li></ul>
              </li>
            
          
            
              <li class="category-list-container">
                <a href="javascript:;">Category</a>
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Anime/">Anime</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Blogging/">Blogging</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading/">Reading</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂说/">杂说</a><span class="category-list-count">8</span></li></ul>
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">Tag</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GFW/">GFW</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anime/">anime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/boost/">boost</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/makefile/">makefile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/no/">no</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/theme/">theme</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/旧作/">旧作</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/武侠小说/">武侠小说</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读后感/">读后感</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/金庸/">金庸</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a><span class="tag-list-count">2</span></li></ul>
              </li>
            
          
          
          
        
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/trisolaris233" title="Github" target="_blank" rel="noopener">Github</a>
              </li>
            
          
            
              <li>
                <a href="/atom.xml" title="RSS">RSS</a>
              </li>
            
          
          
          
        
      
      
        <br>
              
                <li class="link"><a target="_blank" href="https://buger404.github.io/">404の番外地</a></li>
              
                <li class="link"><a target="_blank" href="https://xxs2.cn">小学生的博客</a></li>
              
                <li class="link"><a target="_blank" href="https://yorkin.cool">方程的博客</a></li>
              
                <li class="link"><a target="_blank" href="https://9bie.org">⑨BIE的博客</a></li>
              
                <li class="link"><a target="_blank" href="https://server.nutr1t07.codes">nutr1t07&#39;s blog</a></li>
              
                <li class="link"><a target="_blank" href="https://cmjang.github.io">沉默的博客</a></li>
              
                <li class="link"><a target="_blank" href="https://slacksoft.iicp.net/">番茄</a></li>
              
          
    
    </ul>

  </ul></ul></div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          <article id="post-Learning-Makefile-By-Example" class="article article-type-post">
  
    <h1 class="article-header">
      通过一个小项目学习Makefile
    </h1>
  
  

  <div class="article-info">
    <span class="article-date">
  2019-02-02
</span>

    
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/杂说/">杂说</a></li></ul>
	</span>


    
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/makefile/">makefile</a></li></ul>
	</span>


  </div>
  <div class="article-entry">
    <p>最近在linux上写了一个小项目，接触了make等工具，这次就通过一些辅助例子和我这个小项目来介绍一下makefile的基本写法。</p>
<h2 id="makefile何为物"><a href="#makefile何为物" class="headerlink" title="makefile何为物"></a>makefile何为物</h2><blockquote>
<p>在软件开发中，make是一个工具程序（Utility software），经由读取叫做“makefile”的文件，自动化建构软件。</p>
</blockquote>
<p>这是来自维基百科的介绍， 其实说直白一点，就是一个编译工具。因此， 我们下载下来一个项目后， 一般会附带一个<code>makefile</code>文件。 更普遍的， 是附带一个<code>configure</code>文件，用于检查并生成需要的<code>makefile</code>文件，然后通过命令行执行<code>make</code>来编译。 执行<code>make install</code>来安装。</p>
<h2 id="makefile的用途"><a href="#makefile的用途" class="headerlink" title="makefile的用途"></a>makefile的用途</h2><p>考虑下面的文件目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">└── src</span><br><span class="line">    └── main.cpp</span><br></pre></td></tr></table></figure></p>
<p>如果我们位于当前目录，要编译<code>main.cpp</code>实在是再简单不过，于是我们张口就莱: <code>g++ src/main.cpp -o main</code>。　这样就成功编译了<code>main.cpp</code>文件。显然这样敲命令不会比使用<code>makefile</code>麻烦多少，然而这是还没到<code>makefile</code>大显身手的时候。</p>
<h2 id="makefile的基本写法"><a href="#makefile的基本写法" class="headerlink" title="makefile的基本写法"></a>makefile的基本写法</h2><p>当然，我们的目的是学习<code>makefile</code>，那么就以编译上面的<code>main.cpp</code>为例，介绍一下<code>makefile</code>的基本写法吧！</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注释</span></span><br><span class="line"><span class="section">target(目标): dependencies(依赖文件)</span></span><br><span class="line">&lt;tab&gt;command1 <span class="comment"># 命令1</span></span><br><span class="line">&lt;tab&gt;command2 <span class="comment"># 命令2</span></span><br></pre></td></tr></table></figure>
<p>一下子看不懂不要紧，且听我道来。<code>target</code>通常是我们要生成的文件的名字， <code>dependencies</code>是生成<code>target</code>所需的文件名列表， 如果为空就不需要写， 有多个文件用空格隔开。因此， 要把<code>main.cpp</code>编译成可执行文件<code>main</code>可以写成这样：<code>main: main.cpp</code>。</p>
<p>写好了<code>target</code>和<code>dependencies</code>后是换行， 接下来就要告诉<code>makefile</code>这个文件是如何生成出来的了。因此要键入编译指令。此处要注意<code>&lt;tab&gt;</code>是指一个<code>tab</code>键而不是四个空格， 这跟<code>python</code>有点像，熟悉<code>python</code>的小伙伴应该对此比较满意233。 因此<code>command1</code>和<code>command2</code>都是指命令行命令。</p>
<p>通过上面的介绍， 我们可以写出下面的makefile文件：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">main: src/main.cpp</span></span><br><span class="line">	g++ src/main.cpp -o main</span><br></pre></td></tr></table></figure></p>
<p>保存后， 进入控制台执行<code>make</code>, <code>make</code>就会自动的执行<code>makefile</code>文件中的第一个<code>target</code>。 </p>
<h2 id="一个稍复杂的例子"><a href="#一个稍复杂的例子" class="headerlink" title="一个稍复杂的例子"></a>一个稍复杂的例子</h2><p>考虑下面的文件目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">└── src</span><br><span class="line">    ├── a.cpp</span><br><span class="line">    ├── a.h</span><br><span class="line">    ├── b.cpp</span><br><span class="line">    ├── b.h</span><br><span class="line">    ├── c.cpp</span><br><span class="line">    ├── c.h</span><br><span class="line">    ├── d.cpp</span><br><span class="line">    ├── d.h</span><br><span class="line">    └── main.cpp</span><br></pre></td></tr></table></figure></p>
<p>这是一个常见的小工程项目，其中<code>main.cpp</code>是主函数所在的源文件，<code>main.cpp</code>包含了<code>a.h</code>,<code>b.h</code>,<code>c.h</code>,<code>d.h</code>四个头文件，而四个头文件的功能实现分别放在对应的源文件中，先考虑如何用控制台命令编译这个项目？</p>
<p>很快我们想到了，于是章口就莱：<br><code>g++ src/main.cpp src/a.cpp src/b.cpp src/d.cpp -o main</code></p>
<p>很显然4个源文件还是可以用控制台命令轻松处理， 但对于这行命令我要提出两个问题：</p>
<ol>
<li>如果我们只修改了<code>b.cpp</code> 上面的命令会导致所有源文件都重新编译。</li>
<li>4个源文件只是个例子，在一般规模的项目中，几十个源文件是司空见惯的。</li>
</ol>
<p>对于第一个问题很容易解决，只要加上<code>-c</code>选项就行， 表示生成目标文件代码(<code>.o文件</code>)；对于第二个问题最简单的解决方法就是编写一个<code>makefile</code>来控制编译。</p>
<p>于是乎， 问题变成了：如何编写这个项目的<code>makefile</code>代码？</p>
<p>根据上面的例子， 可以先考虑下我预先写完的<code>makefile</code>文件：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">main: src/main.cpp src/a.o src/b.o src/c.o src/d.o</span></span><br><span class="line">	g++ src/main.cpp src/a.o src/b.o src/c.o src/d.o -o myhttpd</span><br><span class="line"></span><br><span class="line"><span class="section">src/a.o: src/a.cpp</span></span><br><span class="line">	g++ -c src/a.cpp</span><br><span class="line">	</span><br><span class="line"><span class="section">src/b.o:</span></span><br><span class="line"><span class="section">src/c.o:</span></span><br><span class="line"><span class="section">src/d.o:</span></span><br></pre></td></tr></table></figure>
<p>首先第一行给出了编译<code>main</code>的方法， 它依赖于<code>src/main.cpp</code>和后面的一大堆<code>.o</code>文件。那么这些<code>.o</code>文件是哪里来的呢？  下面的代码就在说明各个.o文件是怎么出来的。 这里我用了<code>makefile</code>比较良心的智能推断。 我只写了<code>src/a.o</code>依赖于<code>src/a.cpp</code>， 接下来的几个用不着我细说<code>makefile</code>就明白并且在执行时会自动编译。</p>
<p>接下来又出现了问题，这样编译会导致目录下有很多<code>.o</code>文件，如果哪一天我不需要了怎么清除他们呢？ 这个用命令行一样好办， <code>makefile</code>也可以帮忙解决这个问题。 我们只消在原来的文件中加上：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm src/*.o</span><br></pre></td></tr></table></figure></p>
<p>然后执行<code>make clean</code>就可以啦！</p>
<p>通过上面的例子我们知道<code>makefile</code>的<code>target</code>不是仅仅文件而已， 解释成<code>任务</code>或许更好。这样可以帮助我们对<code>makefile</code>的理解。<code>makefile</code>默认只执行第一个<code>target</code>和其依赖的文件。</p>
<h2 id="改进makefile"><a href="#改进makefile" class="headerlink" title="改进makefile"></a>改进makefile</h2><p>考虑这样一个情景： 你写了一个项目， 也编写了<code>makefile</code>，但你发现<code>g++</code>简直是傻逼！ 你决定换成<code>clang</code>编译器， 这该如何是好？ </p>
<p>你灵稽一动， 想到可以用一般文本编辑器都带的文本替换功能， 把所有<code>g++</code>换成<code>clang</code>就可以了， 这显然是个挺好的解决方案， 不过我们可以改进<code>makefile</code>文件的写法，就可以用一种更加优雅的方式解决这个问题（程序员总是强调<strong><code>优雅</code></strong>这个问题）</p>
<p>我们可以为<code>makefile</code>设置变量来改， <code>makefile</code>中变量的设置和其他语言不无二致。 举个例子：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CC = g++</span><br><span class="line"></span><br><span class="line"><span class="section">main: src/main.cpp</span></span><br><span class="line">	<span class="variable">$(CC)</span> src/main.cpp -o main <span class="comment"># $(CC)就是g++</span></span><br></pre></td></tr></table></figure></p>
<p>这就是<code>makefile</code>中变量的设定。 是不是很简单？ 如果有多个， 用空格隔开就行， 调用的时候也是一样的。 这样一来， 我们就可以改写我们上面的<code>makefile</code>了！</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">CC = g++</span><br><span class="line">CFLAGS = -std=c++11	<span class="comment"># 设置编译选项变量 表示启用c++11标准</span></span><br><span class="line">OBJS = src/a.o src/b.o src/c.o src/d.o	<span class="comment"># 设置目标代码文件变量</span></span><br><span class="line"></span><br><span class="line"><span class="section">main: src/main.cpp <span class="variable">$(OBJS)</span></span></span><br><span class="line">	<span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> src/main.cpp <span class="variable">$(OBJS)</span> -o main</span><br><span class="line"></span><br><span class="line"><span class="section">src/a.o: src/a.cpp</span></span><br><span class="line">	g++ -c src/a.cpp</span><br><span class="line">	</span><br><span class="line"><span class="section">src/b.o:</span></span><br><span class="line"><span class="section">src/c.o:</span></span><br><span class="line"><span class="section">src/d.o:</span></span><br><span class="line"></span><br><span class="line"><span class="section">clean:	# 清除.o文件</span></span><br><span class="line">	rm src/*.o</span><br><span class="line">	</span><br><span class="line"><span class="section">install:	# 使用cp命令安装到可执行文件目录</span></span><br><span class="line">	sudo cp main /usr/bin/main</span><br></pre></td></tr></table></figure>
<p>这样一来， 我们就可以执行<code>make</code>来编译。 <code>make clean</code>来删除不必要的文件， <code>make install</code>来安装软件。 如果需要更换编器的画就把<code>CC = g++</code>换成<code>CC = clang</code>就可以了！</p>
<h2 id="例子-myhttpd项目"><a href="#例子-myhttpd项目" class="headerlink" title="例子: myhttpd项目"></a>例子: myhttpd项目</h2><p>学习了上面<code>makefile</code>的基本写法之后， 来观察一下<a href="https://github.com/trisolaris233/myhttpd" target="_blank" rel="noopener"><code>myhttpd</code></a>项目的文件目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── LICENSE</span><br><span class="line">├── makefile</span><br><span class="line">├── README.md</span><br><span class="line">└── src</span><br><span class="line">    ├── compress.cpp</span><br><span class="line">    ├── compress.h</span><br><span class="line">    ├── myhttpd.cpp</span><br><span class="line">    ├── parse.cpp</span><br><span class="line">    ├── parse.h</span><br><span class="line">    ├── request.cpp</span><br><span class="line">    ├── request.h</span><br><span class="line">    ├── response.cpp</span><br><span class="line">    ├── response.h</span><br><span class="line">    ├── server.cpp</span><br><span class="line">    ├── server.h</span><br><span class="line">    ├── socket.cpp</span><br><span class="line">    ├── socket.h</span><br><span class="line">    ├── tools.cpp</span><br><span class="line">    ├── tools.h</span><br><span class="line">    └── welcome</span><br><span class="line">        ├── index.html</span><br><span class="line">        └── myhttpd.png</span><br></pre></td></tr></table></figure></p>
<p>编译这个项目的<code>makefile</code>文件如下：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">CC = g++</span><br><span class="line">CFLAGS = -std=c++11 -lz <span class="comment"># 启用C++11， 链接zlib</span></span><br><span class="line">OBJS = src/parse.o src/request.o src/response.o src/socket.o src/tools.o src/compress.o src/server.o</span><br><span class="line"></span><br><span class="line"><span class="section">myhttpd: src/myhttpd.cpp <span class="variable">$(OBJS)</span></span></span><br><span class="line">	<span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> src/myhttpd.cpp <span class="variable">$(OBJS)</span> -o myhttpd</span><br><span class="line"></span><br><span class="line"><span class="section">src/parse.o: src/parse.cpp</span></span><br><span class="line"><span class="section">src/request.o:</span></span><br><span class="line"><span class="section">src/response.o:</span></span><br><span class="line"><span class="section">src/socket.o:</span></span><br><span class="line"><span class="section">src/tools.o:</span></span><br><span class="line"><span class="section">src/compress.o:</span></span><br><span class="line"><span class="section">src/server.o:</span></span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm src/*.o</span><br><span class="line"></span><br><span class="line"><span class="section">install:</span></span><br><span class="line">	sudo cp ./myhttpd /usr/bin/myhttpd</span><br></pre></td></tr></table></figure></p>
<p>相信通过上面的学习可以轻易的理解这段<code>makefile</code>代码， 而且我们发现通过<code>makefile</code>代码可以更加容易的观察各个文件的依赖关系。</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p><code>makefile</code>是学习编程中或多或少会接触到的东西，今天通过一些实例简单的介绍了一下<code>make</code>这个使用的工具，希望能对大家有所帮助。</p>
<p>本篇博文只是介绍了<code>makefile</code>的冰山一角， 本人也在学习的路上。</p>

  </div>
  <footer class="article-footer">
    
  <div class="cc">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" title="Attribution-ShareAlike">
      <img src="/images/cc/cc.png">
      
          <img src="/images/cc/by.png">
        
          <img src="/images/cc/sa.png">
      
      <span>
        This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.
      </span>
    </a>
  </div>


    

  </footer>
</article>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk-container"></div>
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '1e120b7c658fe12ea9f7',
        clientSecret: '09676067964443ebe8a6350e04bb843514caa18e',
        id: window.location.pathname,
        repo: 'BlogCommentsRepo',
        owner: 'trisolaris233',
        admin: 'trisolaris233'
    })
    gitalk.render('gitalk-container')
</script>


          <div class="main-footer">
  
    © 2020 阳光加冰の博客 - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
